<!DOCTYPE html>
<html>
<head>
  <title>Downloader</title>
  <style>
    /* Dark mode styles (default) */
    body {
      padding: 25px;
      background-color: #121212; /* Dark background */
      color: #ff6f00; /* McLaren orange */
      font-family: sans-serif;
    }

    /* Styles for input fields */
    input[type="text"] {
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #555; /* Darker border in dark mode */
        border-radius: 4px;
        background-color: #333; /* Darker background in dark mode */
        color: #eee; /* Light text in dark mode */
    }

    /* Style the button */
    button {
      padding: 10px 15px;
      background-color: #0056b3; /* Adjust button color for dark mode */
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
        background-color: #003f7a; /* Darker hover effect */
    }

    /* Style the links */
    #assetList a {
        color: #ff6f00; /* McLaren orange */
        text-decoration: none;
        margin-bottom: 5px;
        display: block;
        transition: color 0.2s;
    }

    #assetList a:hover {
        text-decoration: underline;
        color: #ff9100; /* Slightly lighter orange on hover */
    }

    #assetList a:active,
    #assetList a:visited {
        color: #b34700; /* Darker shade for clicked/visited links */
    }

    h4 {
      margin-bottom: 4px;   /* Reduce space below the title */
      margin-top: 16px;     /* Optional: reduce space above the title */
    }

    input[type="checkbox"], input[type="radio"] {
      accent-color: #ff6f00; /* McLaren orange for checked, dark for unchecked */
      border: 1.5px solid #ff6f00;
      /* Remove background-color here, let accent-color handle both states */
    }

    input[type="checkbox"]:checked,
    input[type="radio"]:checked {
      /* Remove redundant styles, handled by accent-color */
    }

    /* Hide the native checkbox/radio */
    input[type="checkbox"].styled,
    input[type="radio"].styled {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* Custom checkbox/radio style */
    .custom-checkbox,
    .custom-radio {
      display: inline-block;
      width: 18px;
      height: 18px;
      background: #222;
      border: 1.5px solid #ff6f00;
      border-radius: 4px;
      vertical-align: middle;
      margin-right: 6px;
      position: relative;
      cursor: pointer;
    }

    .custom-radio {
      border-radius: 50%;
    }

    /* Checked state */
    input[type="checkbox"].styled:checked + .custom-checkbox,
    input[type="radio"].styled:checked + .custom-radio {
      background: #ff6f00;
      box-shadow: 0 0 0 2px #ff6f00 inset;
    }

    /* Checkmark for checkbox */
    .custom-checkbox:after {
      content: "";
      position: absolute;
      display: none;
    }

    input[type="checkbox"].styled:checked + .custom-checkbox:after {
      display: block;
    }

    .custom-checkbox:after {
      left: 5px;
      top: 1px;
      width: 4px;
      height: 9px;
      border: solid #222;
      border-width: 0 3px 3px 0;
      transform: rotate(45deg);
    }

    /* Dot for radio */
    .custom-radio:after {
      content: "";
      position: absolute;
      display: none;
    }

    input[type="radio"].styled:checked + .custom-radio:after {
      display: block;
    }

    .custom-radio:after {
      top: 4px;
      left: 4px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #222;
    }
  </style>
</head>
<body>

<!--   
        amberelec ark pan4elec rocknix uos
        bookworm jammy noble plucky    
        https://github.com/EatPrilosec/R36S-Multiboot/releases/download/untagged-f4f7d6f22d7c774bb614/R36S-Multiboot-amberelec-pan4elec-2025-06-25-2309.img.xz.7z.001 
-->

<h3>Select OSes</h3>
<label>
  <input type="checkbox" class="styled myCheckbox" name="option1" value="amberelec" checked>
  <span class="custom-checkbox"></span>
  Amberelec
</label><br>
<label>
  <input type="checkbox" class="styled myCheckbox" name="option2" value="ark" checked>
  <span class="custom-checkbox"></span>
  ArkOS
</label><br>
<label>
  <input type="checkbox" class="styled myCheckbox" name="option3" value="pan4elec" checked>
  <span class="custom-checkbox"></span>
  PAN4ELEC
</label><br>
<label>
  <input type="checkbox" class="styled myCheckbox" name="option4" value="rocknix" checked>
  <span class="custom-checkbox"></span>
  Rocknix
</label><br>
<label>
  <input type="checkbox" class="styled myCheckbox" name="option5" value="uos" checked>
  <span class="custom-checkbox"></span>
  UnofficialOS
</label><br>
<h4>Select Armbian Version</h4>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="" id="noarmbian" checked>
  <span class="custom-radio"></span>
  No Armbian
</label><br>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="bookworm" id="bookworm">
  <span class="custom-radio"></span>
  Armbian Bookworm
</label><br>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="jammy" id="jammy">
  <span class="custom-radio"></span>
  Armbian Jammy
</label><br>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="noble" id="noble">
  <span class="custom-radio"></span>
  Armbian Noble
</label><br>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="plucky" id="plucky">
  <span class="custom-radio"></span>
  Armbian Plucky
</label><br>
<label>
  <input type="radio" class="styled myCheckbox" name="option6" value="bookworm-jammy-noble-plucky" id="all">
  <span class="custom-radio"></span>
  Armbian (all)
</label><br><br>

<p id="result"></p>
<div id="assetList"></div>

<footer id="repoFooter" style="margin-top:2em; color:#ff6f00; font-size:0.95em;"></footer>

<script>
function wildcardToRegExp(pattern) {
  // Escape regex special chars except *
  pattern = pattern.replace(/[-\/\\^$+?.()|[\]{}]/g, '\\$&');
  // Replace * with .*
  pattern = pattern.replace(/\*/g, '.*');
  return new RegExp('^' + pattern + '$', 'i');
}

function getRepoInfoFromLocation() {
  // e.g. https://owner.github.io/repo/...
  const match = window.location.hostname.match(/^([^.]+)\.github\.io$/);
  const owner = match ? match[1] : "EatPrilosec";
  const repo = "R36S-Multiboot"; // Hardcoded repo name
  return { owner, repo };
}

async function fetchAndDisplayAssets() {
  const { owner, repo } = getRepoInfoFromLocation();
  const apiUrl = `https://api.github.com/repos/${owner}/${repo}/releases/latest`;
  const resultElem = document.getElementById("result");
  const assetListElem = document.getElementById("assetList");
  const pattern = resultElem.textContent;
  const regex = wildcardToRegExp(pattern);

  assetListElem.innerHTML = "Loading...";

  try {
    const response = await fetch(apiUrl);
    const data = await response.json();
    const assets = data.assets || [];
    const matches = assets.filter(asset => regex.test(asset.name));

    if (matches.length === 0) {
      assetListElem.innerHTML = "No matching assets found.";
      return;
    }

    assetListElem.innerHTML = matches.map(asset =>
      `<a href="${asset.browser_download_url}" target="_blank">${asset.name}</a>`
    ).join('');
  } catch (e) {
    assetListElem.innerHTML = "Error fetching assets.";
  }
}

function getStringFromCheckboxes() {
  const checkboxes = document.querySelectorAll('.myCheckbox');
  let resultString = "";

  checkboxes.forEach(function(checkbox) {
    if (checkbox.checked && checkbox.value) {
      resultString += checkbox.value + "-";
    }
  });

  resultString = resultString.slice(0, -1);
  resultString = "R36S-Multiboot-" + resultString + "-20*.img.xz.7z.*";
  document.getElementById("result").textContent = resultString;

  fetchAndDisplayAssets();
}

// Add event listeners to update result on change
document.querySelectorAll('.myCheckbox').forEach(function(checkbox) {
  checkbox.addEventListener('change', getStringFromCheckboxes);
});

// Call once on page load to initialize
getStringFromCheckboxes();

function updateRepoFooter() {
  const { owner, repo } = getRepoInfoFromLocation();
  const footer = document.getElementById("repoFooter");
  footer.innerHTML = `Using GitHub repo: <a href="https://github.com/${owner}/${repo}" target="_blank" style="color:#ff6f00;">${owner}/${repo}</a>`;
}
updateRepoFooter();
</script>

</body>
</html>
